<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>角色管理</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Charisma, a fully featured, responsive, HTML5, Bootstrap admin template.">
    <meta name="author" content="Muhammad Usman">

    <!-- The styles -->
    <link href="__PUBLIC__/Back/charisma/css/bootstrap-cerulean.min.css" rel="stylesheet">

    <link href="__PUBLIC__/Back/charisma/css/charisma-app.css" rel="stylesheet">
    <link href='__PUBLIC__/Back/charisma/bower_components/fullcalendar/dist/fullcalendar.css' rel='stylesheet'>
    <link href='__PUBLIC__/Back/charisma/bower_components/fullcalendar/dist/fullcalendar.print.css' rel='stylesheet' media='print'>
    <link href='__PUBLIC__/Back/charisma/bower_components/chosen/chosen.min.css' rel='stylesheet'>
    <link href='__PUBLIC__/Back/charisma/bower_components/colorbox/example3/colorbox.css' rel='stylesheet'>
    <link href='__PUBLIC__/Back/charisma/bower_components/responsive-tables/responsive-tables.css' rel='stylesheet'>
    <link href='__PUBLIC__/Back/charisma/bower_components/bootstrap-tour/build/css/bootstrap-tour.min.css' rel='stylesheet'>
    <link href='__PUBLIC__/Back/charisma/css/jquery.noty.css' rel='stylesheet'>
    <link href='__PUBLIC__/Back/charisma/css/noty_theme_default.css' rel='stylesheet'>
    <link href='__PUBLIC__/Back/charisma/css/elfinder.min.css' rel='stylesheet'>
    <link href='__PUBLIC__/Back/charisma/css/elfinder.theme.css' rel='stylesheet'>
    <link href='__PUBLIC__/Back/charisma/css/jquery.iphone.toggle.css' rel='stylesheet'>
    <link href='__PUBLIC__/Back/charisma/css/uploadify.css' rel='stylesheet'>
    <link href='__PUBLIC__/Back/charisma/css/animate.min.css' rel='stylesheet'>

    <!-- jQuery -->
    <script src="__PUBLIC__/Back/charisma/bower_components/jquery/jquery.min.js"></script>

    <!-- The HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- The fav icon -->
    <link rel="shortcut icon" href="__PUBLIC__/Back/charisma/img/favicon.ico">

</head>

<body>
<!-- topbar starts -->
<div class="navbar navbar-default" role="navigation">

    <div class="navbar-inner">
        <button type="button" class="navbar-toggle pull-left animated flip">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html"> <img alt="Charisma Logo" src="__PUBLIC__/Back/charisma/img/logo20.png" class="hidden-xs"/>
            <span>编程云</span></a>

        <!-- user dropdown starts -->
        <div class="btn-group pull-right">
            <button class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                <i class="glyphicon glyphicon-user"></i>
                <volist>
                    <span class="hidden-sm hidden-xs"><?php $name=session('a_name'); echo $name; ?></span>
                </volist>
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" style="min-width: 120px">
                <li><a href="../Index/loginout">注销</a></li>
            </ul>
        </div>
        <!-- user dropdown ends -->
    </div>
</div>
<!-- topbar ends -->
<div class="ch-container">
    <div class="row">

        <!-- left menu starts -->
        <!--引用公共的布局-->
        <include file="Common:sidebar"/>
        <!--/span-->
        <!-- left menu ends -->
        <div id="content" class="col-lg-10 col-sm-10">
            <!-- content starts -->

            <div class="row">
                <div class="box col-md-12">
                    <div class="box-inner">
                        <div class="box-header well" data-original-title="">
                            <h2><i class="glyphicon glyphicon-star-empty"></i> 角色列表</h2>

                            <div class="box-icon">
                                <!--<a href="#" class="btn btn-setting btn-round btn-default"><i-->
                                <!--class="glyphicon glyphicon-cog"></i></a>-->
                                <a href="#" class="btn btn-minimize btn-round btn-default"><i
                                        class="glyphicon glyphicon-chevron-up"></i></a>
                                <a href="#" class="btn btn-close btn-round btn-default"><i
                                        class="glyphicon glyphicon-remove"></i></a>
                            </div>
                        </div>
                        <div class="box-content">
                            <!--内容-->
                            <div class="box-content">
                         <table class="table table-striped table-bordered bootstrap-datatable datatable responsive">
                                    <a class="label-warning label label-default" href="{:U('Role/add')}" style="float: right">
                                        <i class="glyphicon icon-white">添加角色</i>
                                    </a> 
                                    <thead>
                                    <tr>
                                        <th>序号</th>
                                        <th>角色</th>
                                        <th>权限信息</th>
                                        <th>操作</th>                                         
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <volist name="info" id="role">
                                    <tr> 
                                        <td width='100'>{$role.role_id}</td>
                                        <td class="center">{$role.role_name}</td>
                                        <td class="center"><a href="__CONTROLLER__/distribute/role_id/{$role.role_id}" >权限信息</a></td> 
                                        <td class="center">
                                            <a class="label-warning label label-default" href="{:U('Role/upd')}?role_id={$role.role_id}">
                                                <i class="glyphicon glyphicon-edit icon-white"></i>
                                                修改
                                            </a>&nbsp;&nbsp;&nbsp;
                                            <a class="label-default label label-danger" href="javascript:void(0)" onclick="del({$role.role_id},this)">
                                                <i class="glyphicon glyphicon-trash icon-white"></i>
                                                删除
                                            </a>
                                        </td>                   
                                     </volist>
                                    </tr>
                                </volist>
                                    </tbody>
                                </table>
                            </div>
                            <!--内容-->
                            <!-- put your content here -->
                        </div>
                    </div>
                </div>
            </div><!--/row-->
            <!-- content ends -->
        </div><!--/#content.col-md-0-->
    </div><!--/fluid-row-->

    <hr>
</div>
<!--<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"-->
<!--aria-hidden="true">-->

<!--<div class="modal-dialog">-->
<!--<div class="modal-content">-->
<!--<div class="modal-header">-->
<!--<button type="button" class="close" data-dismiss="modal">×</button>-->
<!--<h3>Settings</h3>-->
<!--</div>-->
<!--<div class="modal-body">-->
<!--<p>Here settings can be configured...</p>-->
<!--</div>-->
<!--<div class="modal-footer">-->
<!--<a href="#" class="btn btn-default" data-dismiss="modal">Close</a>-->
<!--<a href="#" class="btn btn-primary" data-dismiss="modal">Save changes</a>-->
<!--</div>-->
<!--</div>-->
<!--</div>-->
<!--</div>-->

<!--<footer class="row">-->
<!--<p class="col-md-9 col-sm-9 col-xs-12 copyright">&copy; <a href="http://usman.it" target="_blank">Muhammad-->
<!--Usman</a> 2012 - 2015</p>-->

<!--<p class="col-md-3 col-sm-3 col-xs-12 powered-by">Powered by: <a-->
<!--href="http://usman.it/free-responsive-admin-template">Charisma</a></p>-->
<!--</footer>-->

<!--</div>&lt;!&ndash;/.fluid-container&ndash;&gt;-->

<!-- external javascript -->

<script src="__PUBLIC__/Back/charisma/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

<!-- library for cookie management -->
<script src="__PUBLIC__/Back/charisma/js/jquery.cookie.js"></script>
<!-- calender plugin -->
<script src='__PUBLIC__/Back/charisma/bower_components/moment/min/moment.min.js'></script>
<script src='__PUBLIC__/Back/charisma/bower_components/fullcalendar/dist/fullcalendar.min.js'></script>
<!-- data table plugin -->
<script src='__PUBLIC__/Back/charisma/js/jquery.dataTables.min.js'></script>

<!-- select or dropdown enhancer -->
<script src="__PUBLIC__/Back/charisma/bower_components/chosen/chosen.jquery.min.js"></script>
<!-- plugin for gallery image view -->
<script src="__PUBLIC__/Back/charisma/bower_components/colorbox/jquery.colorbox-min.js"></script>
<!-- notification plugin -->
<script src="__PUBLIC__/Back/charisma/js/jquery.noty.js"></script>
<!-- library for making tables responsive -->
<script src="__PUBLIC__/Back/charisma/bower_components/responsive-tables/responsive-tables.js"></script>
<!-- tour plugin -->
<script src="__PUBLIC__/Back/charisma/bower_components/bootstrap-tour/build/js/bootstrap-tour.min.js"></script>
<!-- star rating plugin -->
<script src="__PUBLIC__/Back/charisma/js/jquery.raty.min.js"></script>
<!-- for iOS style toggle switch -->
<script src="__PUBLIC__/Back/charisma/js/jquery.iphone.toggle.js"></script>
<!-- autogrowing textarea plugin -->
<script src="__PUBLIC__/Back/charisma/js/jquery.autogrow-textarea.js"></script>
<!-- multiple file upload plugin -->
<script src="__PUBLIC__/Back/charisma/js/jquery.uploadify-3.1.min.js"></script>
<!-- history.js for cross-browser state change on ajax -->
<script src="__PUBLIC__/Back/charisma/js/jquery.history.js"></script>
<!-- application script for Charisma demo -->
<script src="__PUBLIC__/Back/charisma/js/charisma.js"></script>

<script>
   function del(role_id,obj){
    var result=confirm("确认要删除吗");
    if(result){
      $.ajax({
        url:"{:U('del')}",
                type:"post",
                async:false,
                data:{"id":role_id},
                success:function(e){
                  if(e==1){
                    obj.parentNode.parentNode.remove();
                  }else{
                      alert("删除失败");
                  }
        }
      })
    }
   }
</script>
</body>
</html>
